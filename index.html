<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"jiajie999.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="J&#39;s blog">
<meta property="og:url" content="http://jiajie999.github.io/index.html">
<meta property="og:site_name" content="J&#39;s blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Jie.Jia">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://jiajie999.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>J's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">J's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://jiajie999.github.io/2016/01/02/2016-01-02-use-python-3rd-party-lib/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jie.Jia">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="J's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/02/2016-01-02-use-python-3rd-party-lib/" class="post-title-link" itemprop="url">Some interesting python libs</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-02 12:06:53" itemprop="dateCreated datePublished" datetime="2016-01-02T12:06:53+08:00">2016-01-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-08-13 16:25:27" itemprop="dateModified" datetime="2020-08-13T16:25:27+08:00">2020-08-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="http://multithreaded.stitchfix.com/blog/2015/07/16/pyxley/">pyxley生成交互式的可视化数据</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/lorien/user_agent">生成随机user-agent</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/themiurgo/ratelim">Rate limit your api call</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/emirozer/fake2db">Fake data in database</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/joke2k/faker">There is another lib which just generates fake data</a></p>
<p>在项目里用过，很好用，现在也支持输出多国语言的数据</p>
<p><a target="_blank" rel="noopener" href="https://github.com/mobify/iterstuff">Useful tools for working with iterators</a></p>
<p>暂时用不到，标准库里的iterator tools已经很强大了</p>
<p><a target="_blank" rel="noopener" href="https://github.com/benjamin-croker/loggy">log function call</a></p>
<p>之前有过操作日志的需求自己写了一个，同时往文件和mongo里存log。有了这个就不用自己重复造轮子了</p>
<p><a target="_blank" rel="noopener" href="https://github.com/rdegges/brute">brute</a></p>
<p>方便生成字符全排列,想学iterator tools用法的可以看看这个包。</p>
<p><a target="_blank" rel="noopener" href="https://github.com/sloria/doitlive">doitlive</a></p>
<p>强烈推荐！非常酷的命令行演示工具大幅度提升逼格</p>
<p><a target="_blank" rel="noopener" href="https://github.com/avelino/mining">Business Intelligence (BI) in Python (Pandas web interface)</a></p>
<p>pandas的web界面版</p>
<p><a target="_blank" rel="noopener" href="http://amoffat.github.com/sh">sh</a></p>
<p>在python中直接import shell命令</p>
<p><a target="_blank" rel="noopener" href="http://delorean.readthedocs.org/en/latest/">delorean</a></p>
<p>处理时间相关功能的好东西</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://jiajie999.github.io/2015/10/02/2015-01-07-python-__slots__/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jie.Jia">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="J's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/10/02/2015-01-07-python-__slots__/" class="post-title-link" itemprop="url">python __slots__ 用法介绍</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-10-02 23:01:55" itemprop="dateCreated datePublished" datetime="2015-10-02T23:01:55+08:00">2015-10-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-08-13 16:15:23" itemprop="dateModified" datetime="2020-08-13T16:15:23+08:00">2020-08-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Python的__solts__方法估计很多人都不知道，个人感觉和metaclass一样属于黑魔法范畴，轻易不要用，除非你知道你在干啥，娱乐学习除外。</p>
<p>###WTF is <strong>slots</strong></p>
<p>当你在一个class中定义了__solts__后所有class的实例中只有slots中定义的attributes会出现在class的实例中。<br>例子：</p>
<pre><code>class Foo:
    __slots__ = [&#39;x&#39;]
    def __init__(self, n):
        self.x = n

y = Foo(1)
print y.x  # prints &quot;1&quot;
y.x = 2
print y.x  # prints &quot;2&quot;
y.z = 4    # 抛出异常
print y.z</code></pre>
<p>###使用场景</p>
<p>节省对象所占用的空间<br>python中的对象默认使用__dict__来存储自己的attributes，借助这个实现，你可以在任何时候动态修改对象的attributes。<br>如果使用了__slots__你可以在每个对象上节省这个dict的空间占用。因为所有对象使用的是同一个__slots__，不再维护自己的dict。<br>算一下你有几百万个对象，每个对象少占用一个dict的空间。。。</p>
<p>实例<a target="_blank" rel="noopener" href="http://tech.oyster.com/pythons-garbage-collector/">AN ARM WRESTLE WITH PYTHON’S GARBAGE COLLECTOR</a><br>文章的作者通过用slots省了9 GB的内存。</p>
<p>###不要滥用</p>
<p>用了slots之后会破坏python的一些feature例如多继承就废了。</p>
<p>###进阶推荐阅读<br><a target="_blank" rel="noopener" href="http://lucumr.pocoo.org/2014/8/16/the-python-i-would-like-to-see/">Armin Ronacher大牛拿slots开刀喷py3的文章</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://jiajie999.github.io/2015/09/09/2015-02-10-auto-complete-your-cmd-by-using-click/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jie.Jia">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="J's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/09/09/2015-02-10-auto-complete-your-cmd-by-using-click/" class="post-title-link" itemprop="url">Auto complete your cmd by using click</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-09-09 20:16:35" itemprop="dateCreated datePublished" datetime="2015-09-09T20:16:35+08:00">2015-09-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-08-13 16:10:48" itemprop="dateModified" datetime="2020-08-13T16:10:48+08:00">2020-08-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>工作中需要用python写命令行工具，比较老的库有argparse/optparse，新一点的docopt/click.<br>经过试用，决定以后的cmd就都用click搞了，用argparse写的老代码有空的时候也会重写。</p>
<p><a target="_blank" rel="noopener" href="http://click.pocoo.org/3/">click</a></p>
<h2 id="用click实现bash自动补全"><a href="#用click实现bash自动补全" class="headerlink" title="用click实现bash自动补全"></a>用click实现bash自动补全</h2><ul>
<li><p>实现命令行工具的setup.py，然后安装命令行到系统中,具体步骤参考文档 <a target="_blank" rel="noopener" href="http://click.pocoo.org/3/setuptools/#setuptools-integration">http://click.pocoo.org/3/setuptools/#setuptools-integration</a></p>
</li>
<li><p>按照click文档中的命名规则写一行脚本放到bashrc中，具体步骤参考文档 <a target="_blank" rel="noopener" href="http://click.pocoo.org/3/bashcomplete/">http://click.pocoo.org/3/bashcomplete/</a></p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://jiajie999.github.io/2015/06/16/2015-06-16-cmd-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jie.Jia">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="J's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/06/16/2015-06-16-cmd-notes/" class="post-title-link" itemprop="url">The Art of Command Line[转]</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-06-16 22:06:53" itemprop="dateCreated datePublished" datetime="2015-06-16T22:06:53+08:00">2015-06-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-08-13 15:52:04" itemprop="dateModified" datetime="2020-08-13T15:52:04+08:00">2020-08-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://github.com/jlevy/the-art-of-command-line/blob/master/README.md">Origin</a></p>
<h1 id="The-Art-of-Command-Line"><a href="#The-Art-of-Command-Line" class="headerlink" title="The Art of Command Line"></a>The Art of Command Line</h1><ul>
<li><a href="#basics">Basics</a></li>
<li><a href="#everyday-use">Everyday use</a></li>
<li><a href="#processing-files-and-data">Processing files and data</a></li>
<li><a href="#system-debugging">System debugging</a></li>
<li><a href="#one-liners">One-liners</a></li>
<li><a href="#obscure-but-useful">Obscure but useful</a></li>
<li><a href="#more-resources">More resources</a></li>
<li><a href="#disclaimer">Disclaimer</a></li>
</ul>
<p>Fluency on the command line is a skill now often neglected or considered archaic, but it improves your flexibility and productivity as an engineer in both obvious and subtle ways. This is a selection of notes and tips on using the command-line that I’ve found useful when working on Linux. Some tips are elementary, and some are fairly specific, sophisticated, or obscure. This page is not long, but if you can use and recall all the items here, you know a lot.</p>
<p>Much of this<br><a target="_blank" rel="noopener" href="http://www.quora.com/What-are-some-lesser-known-but-useful-Unix-commands">originally</a><br><a target="_blank" rel="noopener" href="http://www.quora.com/What-are-the-most-useful-Swiss-army-knife-one-liners-on-Unix">appeared</a><br>on <a target="_blank" rel="noopener" href="http://www.quora.com/What-are-some-time-saving-tips-that-every-Linux-user-should-know">Quora</a>,<br>but given the interest there, it seems it’s worth using Github, where people more talented than I can readily suggest improvements. If you see an error or something that could be better, please submit an issue or PR!</p>
<p>Scope:</p>
<ul>
<li>The goals are breadth and brevity. Every tip is essential in some situation or significantly saves time over alternatives.</li>
<li>This is written for Linux. Many but not all items apply equally to MacOS (or even Cygwin).</li>
<li>The focus is on interactive Bash, though many tips apply to other shells and to general Bash scripting.</li>
<li>Descriptions are intentionally minimal, with the expectation you’ll use <code>man</code>, <code>apt-get</code>/<code>yum</code> to install, and Google for more background.</li>
</ul>
<h2 id="Basics"><a href="#Basics" class="headerlink" title="Basics"></a>Basics</h2><ul>
<li><p>Learn basic Bash. Actually, type <code>man bash</code> and at least skim the whole thing; it’s pretty easy to follow and not that long. Alternate shells can be nice, but bash is powerful and always available (learning <em>only</em> zsh, fish, etc., while tempting on your own laptop, restricts you in many situations, such as using existing servers).</p>
</li>
<li><p>Learn Vim (<code>vi</code>). There’s really no competition for random Linux editing (even if you use Emacs, a big IDE, or a modern hipster editor most of the time).</p>
</li>
<li><p>Know ssh, and the basics of passwordless authentication, via <code>ssh-agent</code>, <code>ssh-add</code>, etc.</p>
</li>
<li><p>Be familiar with bash job management: <code>&amp;</code>, <strong>ctrl-z</strong>, <strong>ctrl-c</strong>, <code>jobs</code>, <code>fg</code>, <code>bg</code>, <code>kill</code>, etc.</p>
</li>
<li><p>Basic file management: <code>ls</code> and <code>ls -l</code> (in particular, learn what every column in <code>ls -l</code> means), <code>less</code>, <code>head</code>, <code>tail</code> and <code>tail -f</code>, <code>ln</code> and <code>ln -s</code> (learn the differences and advantages of hard versus soft links), <code>chown</code>, <code>chmod</code>, <code>du</code> (for a quick summary of disk usage: <code>du -sk *</code>), <code>df</code>, <code>mount</code>.</p>
</li>
<li><p>Basic network management: <code>ip</code> or <code>ifconfig</code>, <code>dig</code>.</p>
</li>
<li><p>Know regular expressions well, and the various flags to <code>grep</code>/<code>egrep</code>. The <code>-i</code>, <code>-o</code>, <code>-A</code>, and <code>-B</code> options are worth knowing.</p>
</li>
<li><p>Learn to use <code>apt-get</code> or <code>yum</code> (depending on distro) to find and install packages. And make sure you have <code>pip</code> to install Python-based command-line tools (a few below are easiest to install via <code>pip</code>).</p>
</li>
</ul>
<h2 id="Everyday-use"><a href="#Everyday-use" class="headerlink" title="Everyday use"></a>Everyday use</h2><ul>
<li><p>In bash, use <strong>ctrl-r</strong> to search through command history.</p>
</li>
<li><p>In bash, use <strong>ctrl-w</strong> to delete the last word, and <strong>ctrl-u</strong> to delete the whole line. Use <strong>alt-Left</strong> and <strong>alt-Right</strong> to move by word, and <strong>ctrl-k</strong> to kill to the end of the line. See <code>man readline</code> for all the default keybindings in bash. There are a lot. For example <strong>alt-.</strong> cycles through previous arguments, and *<em>alt-**</em> expands a glob.</p>
</li>
<li><p>To go back to the previous working directory: <code>cd -</code></p>
</li>
<li><p>If you are halfway through typing a command but change your mind, hit <strong>alt-#</strong> to add a <code>#</code> at the beginning and enter it as a comment (or use <strong>ctrl-a</strong>, <strong>#</strong>, <strong>enter</strong>). You can then return to it later via command history.</p>
</li>
<li><p>Use <code>xargs</code> (or <code>parallel</code>). It’s very powerful. Note you can control how many items execute per line (<code>-L</code>) as well as parallelism (<code>-P</code>). If you’re not sure if it’ll do the right thing, use <code>xargs echo</code> first. Also, <code>-I&#123;&#125;</code> is handy. Examples:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -name \*.py | xargs grep some_function</span><br><span class="line">cat hosts | xargs -I&#123;&#125; ssh root@&#123;&#125; hostname</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>pstree -p</code> is a helpful display of the process tree.</p>
</li>
<li><p>Use <code>pgrep</code> and <code>pkill</code> to find or signal processes by name (<code>-f</code> is helpful).</p>
</li>
<li><p>Know the various signals you can send processes. For example, to suspend a process, use <code>kill -STOP [pid]</code>. For the full list, see <code>man 7 signal</code></p>
</li>
<li><p>Use <code>nohup</code> or <code>disown</code> if you want a background process to keep running forever.</p>
</li>
<li><p>Check what processes are listening via <code>netstat -lntp</code>.</p>
</li>
<li><p>See also <code>lsof</code> for open sockets and files.</p>
</li>
<li><p>In bash scripts, use <code>set -x</code> for debugging output. Use strict modes whenever possible. Use <code>set -e</code> to abort on errors. Use <code>set -o pipefail</code> as well, to be strict about errors (though this topic is a bit subtle). For more involved scripts, also use <code>trap</code>.</p>
</li>
<li><p>In bash scripts, subshells (written with parentheses) are convenient ways to group commands. A common example is to temporarily move to a different working directory, e.g.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># do something in current dir</span><br><span class="line">(cd &#x2F;some&#x2F;other&#x2F;dir; other-command)</span><br><span class="line"># continue in original dir</span><br></pre></td></tr></table></figure>
</li>
<li><p>In bash, note there are lots of kinds of variable expansion. Checking a variable exists: <code>$&#123;name:?error message&#125;</code>. For example, if a bash script requires a single argument, just write <code>input_file=$&#123;1:?usage: $0 input_file&#125;</code>. Arithmetic expansion: <code>i=$(( (i + 1) % 5 ))</code>. Sequences: <code>&#123;1..10&#125;</code>. Trimming of strings: <code>$&#123;var%suffix&#125;</code> and <code>$&#123;var#prefix&#125;</code>. For example if <code>var=foo.pdf</code>, then <code>echo $&#123;var%.pdf&#125;.txt</code> prints <code>foo.txt</code>.</p>
</li>
<li><p>The output of a command can be treated like a file via <code>&lt;(some command)</code>. For example, compare local <code>/etc/hosts</code> with a remote one:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff &#x2F;etc&#x2F;hosts &lt;(ssh somehost cat &#x2F;etc&#x2F;hosts)</span><br></pre></td></tr></table></figure>
</li>
<li><p>Know about “here documents” in bash, as in <code>cat &lt;&lt;EOF ...</code>.</p>
</li>
<li><p>In Bash, redirect both standard output and standard error via: <code>some-command &gt;logfile 2&gt;&amp;1</code>. Often, to ensure a command does not leave an open file handle to standard input, tying it to the terminal you are in, it is also good practice to add <code>&lt;/dev/null</code>.</p>
</li>
<li><p>Use <code>man ascii</code> for a good ASCII table, with hex and decimal values.</p>
</li>
<li><p>Use <code>screen</code> or <code>tmux</code> to multiplex the screen, especially useful on remote ssh sessions and to detach and re-attach to a session. A more minimal alternative for session persistence only is <code>dtach</code>.</p>
</li>
<li><p>In ssh, knowing how to port tunnel with <code>-L</code> or <code>-D</code> (and occasionally <code>-R</code>) is useful, e.g. to access web sites from a remote server.</p>
</li>
<li><p>It can be useful to make a few optimizations to your ssh configuration; for example, this <code>~/.ssh/config</code> contains settings to avoid dropped connections in certain network environments, and use compression (which is helpful with scp over low-bandwidth connections):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">TCPKeepAlive&#x3D;yes</span><br><span class="line">ServerAliveInterval&#x3D;15</span><br><span class="line">ServerAliveCountMax&#x3D;6</span><br><span class="line">Compression&#x3D;yes</span><br></pre></td></tr></table></figure>
</li>
<li><p>A few other options relevant to ssh are security sensitive and should be enabled with care, e.g. per subnet or host or in trusted networks: <code>StrictHostKeyChecking=no</code>, <code>ForwardAgent=yes</code></p>
</li>
<li><p>To get the permissions on a file in octal form, which is useful for system configuration but not available in <code>ls</code> and easy to bungle, use something like</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stat -c &#39;%A %a %n&#39; &#x2F;etc&#x2F;timezone</span><br></pre></td></tr></table></figure>
</li>
<li><p>For interactive selection of values from the output of another command, use <a target="_blank" rel="noopener" href="https://github.com/mooz/percol"><code>percol</code></a>.</p>
</li>
<li><p>For interaction with files based on the output of another command (like <code>git</code>), use <code>fpp</code> (<a target="_blank" rel="noopener" href="https://github.com/facebook/PathPicker">PathPicker</a>).</p>
</li>
</ul>
<h2 id="Processing-files-and-data"><a href="#Processing-files-and-data" class="headerlink" title="Processing files and data"></a>Processing files and data</h2><ul>
<li><p>To locate a file by name in the current directory, <code>find -iname *something* .</code> (or similar). To find a file anywhere by name, use <code>locate something</code> (but bear in mind <code>updatedb</code> my not have indexed recently created files).</p>
</li>
<li><p>For general searching through source or data files (more advanced than <code>grep -r</code>), use <a target="_blank" rel="noopener" href="https://github.com/ggreer/the_silver_searcher"><code>ag</code></a>.</p>
</li>
<li><p>To convert HTML to text: <code>lynx -dump -stdin</code></p>
</li>
<li><p>For Markdown, HTML, and all kinds of document conversion, try <a target="_blank" rel="noopener" href="http://pandoc.org/"><code>pandoc</code></a>.</p>
</li>
<li><p>If you must handle XML, <code>xmlstarlet</code> is old but good.</p>
</li>
<li><p>For JSON, use <code>jq</code>.</p>
</li>
<li><p>For Amazon S3, <a target="_blank" rel="noopener" href="https://github.com/s3tools/s3cmd"><code>s3cmd</code></a> is convenient and <a target="_blank" rel="noopener" href="https://github.com/bloomreach/s4cmd"><code>s4cmd</code></a> is faster. Amazon’s <a target="_blank" rel="noopener" href="https://github.com/aws/aws-cli"><code>aws</code></a> is essential for other AWS-related tasks.</p>
</li>
<li><p>Know about <code>sort</code> and <code>uniq</code>, including uniq’s <code>-u</code> and <code>-d</code> options – see one-liners below.</p>
</li>
<li><p>Know about <code>cut</code>, <code>paste</code>, and <code>join</code> to manipulate text files. Many people use <code>cut</code> but forget about <code>join</code>.</p>
</li>
<li><p>Know that locale affects a lot of command line tools in subtle ways, including sorting order (collation) and performance. Most Linux installations will set <code>LANG</code> or other locale variables to a local setting like US English. But be aware sorting will change if you change locale. And know i18n routines can make sort or other commands run <em>many times</em> slower. In some situations (such as the set operations or uniqueness operations below) you can safely ignore slow i18n routines entirely and use traditional byte-based sort order, using <code>export LC_ALL=C</code>.</p>
</li>
<li><p>Know basic <code>awk</code> and <code>sed</code> for simple data munging. For example, summing all numbers in the third column of a text file: <code>awk &#39;&#123; x += $3 &#125; END &#123; print x &#125;&#39;</code>. This is probably 3X faster and 3X shorter than equivalent Python.</p>
</li>
<li><p>To replace all occurrences of a string in place, in one or more files:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">perl -pi.bak -e &#39;s&#x2F;old-string&#x2F;new-string&#x2F;g&#39; my-files-*.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>To rename many files at once according to a pattern, use <code>rename</code>. For complex renames, <a target="_blank" rel="noopener" href="https://github.com/jlevy/repren"><code>repren</code></a> may help.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Recover backup files foo.bak -&gt; foo:</span><br><span class="line">rename &#39;s&#x2F;\.bak$&#x2F;&#x2F;&#39; *.bak</span><br><span class="line"># Full rename of filenames, directories, and contents foo -&gt; bar:</span><br><span class="line">repren --full --preserve-case --from foo --to bar .</span><br></pre></td></tr></table></figure>
</li>
<li><p>Use <code>shuf</code> to shuffle or select random lines from a file.</p>
</li>
<li><p>Know <code>sort</code>‘s options. Know how keys work (<code>-t</code> and <code>-k</code>). In particular, watch out that you need to write <code>-k1,1</code> to sort by only the first field; <code>-k1</code> means sort according to the whole line.</p>
</li>
<li><p>Stable sort (<code>sort -s</code>) can be useful. For example, to sort first by field 2, then secondarily by field 1, you can use <code>sort -k1,1 | sort -s -k2,2</code></p>
</li>
<li><p>If you ever need to write a tab literal in a command line in bash (e.g. for the -t argument to sort), press <strong>ctrl-v</strong> <strong>[Tab]</strong> or write <code>$&#39;\t&#39;</code> (the latter is better as you can copy/paste it).</p>
</li>
<li><p>For binary files, use <code>hd</code> for simple hex dumps and <code>bvi</code> for binary editing.</p>
</li>
<li><p>Also for binary files, <code>strings</code> (plus <code>grep</code>, etc.) lets you find bits of text.</p>
</li>
<li><p>To convert text encodings, try <code>iconv</code>. Or <code>uconv</code> for more advanced use; it supports some advanced Unicode things. For example, this command lowercases and removes all accents (by expanding and dropping them):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uconv -f utf-8 -t utf-8 -x &#39;::Any-Lower; ::Any-NFD; [:Nonspacing Mark:] &gt;; ::Any-NFC; &#39; &lt; input.txt &gt; output.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>To split files into pieces, see <code>split</code> (to split by size) and <code>csplit</code> (to split by a pattern).</p>
</li>
</ul>
<h2 id="System-debugging"><a href="#System-debugging" class="headerlink" title="System debugging"></a>System debugging</h2><ul>
<li><p>For web debugging, <code>curl</code> and <code>curl -I</code> are handy, or their <code>wget</code> equivalents, or the more modern <a target="_blank" rel="noopener" href="https://github.com/jakubroztocil/httpie"><code>httpie</code></a>.</p>
</li>
<li><p>To know disk/cpu/network status, use <code>iostat</code>, <code>netstat</code>, <code>top</code> (or the better <code>htop</code>), and (especially) <code>dstat</code>. Good for getting a quick idea of what’s happening on a system.</p>
</li>
<li><p>For a more in-depth system overview, use <a target="_blank" rel="noopener" href="https://github.com/nicolargo/glances"><code>glances</code></a>. It presents you with several system level statistics in one terminal window. Very helpful for quickly checking on various subsystems.</p>
</li>
<li><p>To know memory status, run and understand the output of <code>free</code> and <code>vmstat</code>. In particular, be aware the “cached” value is memory held by the Linux kernel as file cache, so effectively counts toward the “free” value.</p>
</li>
<li><p>Java system debugging is a different kettle of fish, but a simple trick on Oracle’s and some other JVMs is that you can run <code>kill -3 &lt;pid&gt;</code> and a full stack trace and heap summary (including generational garbage collection details, which can be highly informative) will be dumped to stderr/logs.</p>
</li>
<li><p>Use <code>mtr</code> as a better traceroute, to identify network issues.</p>
</li>
<li><p>For looking at why a disk is full, <code>ncdu</code> saves time over the usual commands like <code>du -sh *</code>.</p>
</li>
<li><p>To find which socket or process is using bandwidth, try <code>iftop</code> or <code>nethogs</code>.</p>
</li>
<li><p>The <code>ab</code> tool (comes with Apache) is helpful for quick-and-dirty checking of web server performance. For more complex load testing, try <code>siege</code>.</p>
</li>
<li><p>For more serious network debugging, <code>wireshark</code> or <code>tshark</code>.</p>
</li>
<li><p>Know about <code>strace</code> and <code>ltrace</code>. These can be helpful if a program is failing, hanging, or crashing, and you don’t know why, or if you want to get a general idea of performance. Note the profiling option (<code>-c</code>), and the ability to attach to a running process (<code>-p</code>).</p>
</li>
<li><p>Know about <code>ldd</code> to check shared libraries etc.</p>
</li>
<li><p>Know how to connect to a running process with <code>gdb</code> and get its stack traces.</p>
</li>
<li><p>Use <code>/proc</code>. It’s amazingly helpful sometimes when debugging live problems. Examples: <code>/proc/cpuinfo</code>, <code>/proc/xxx/cwd</code>, <code>/proc/xxx/exe</code>, <code>/proc/xxx/fd/</code>, <code>/proc/xxx/smaps</code>.</p>
</li>
<li><p>When debugging why something went wrong in the past, <code>sar</code> can be very helpful. It shows historic statistics on CPU, memory, network, etc.</p>
</li>
<li><p>For deeper systems and performance analyses, look at <code>stap</code> (<a target="_blank" rel="noopener" href="https://sourceware.org/systemtap/wiki">SystemTap</a>), <a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Perf_(Linux)"><code>perf</code></a>, and <a target="_blank" rel="noopener" href="https://github.com/draios/sysdig"><code>sysdig</code></a>.</p>
</li>
<li><p>Confirm what Linux distribution you’re using (works on most distros): <code>lsb_release -a</code></p>
</li>
<li><p>Use <code>dmesg</code> whenever something’s acting really funny (it could be hardware or driver issues).</p>
</li>
</ul>
<h2 id="One-liners"><a href="#One-liners" class="headerlink" title="One-liners"></a>One-liners</h2><p>A few examples of piecing together commands:</p>
<ul>
<li><p>It is remarkably helpful sometimes that you can do set intersection, union, and difference of text files via <code>sort</code>/<code>uniq</code>. Suppose <code>a</code> and <code>b</code> are text files that are already uniqued. This is fast, and works on files of arbitrary size, up to many gigabytes. (Sort is not limited by memory, though you may need to use the <code>-T</code> option if <code>/tmp</code> is on a small root partition.) See also the note about <code>LC_ALL</code> above.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat a b | sort | uniq &gt; c   # c is a union b</span><br><span class="line">cat a b | sort | uniq -d &gt; c   # c is a intersect b</span><br><span class="line">cat a b b | sort | uniq -u &gt; c   # c is set difference a - b</span><br></pre></td></tr></table></figure>
</li>
<li><p>Summing all numbers in the third column of a text file (this is probably 3X faster and 3X less code than equivalent Python):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#39;&#123; x +&#x3D; $3 &#125; END &#123; print x &#125;&#39; myfile</span><br></pre></td></tr></table></figure>
</li>
<li><p>If want to see sizes/dates on a tree of files, this is like a recursive <code>ls -l</code> but is easier to read than <code>ls -lR</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -type f -ls</span><br></pre></td></tr></table></figure>
</li>
<li><p>Use <code>xargs</code> or <code>parallel</code> whenever you can. Note you can control how many items execute per line (<code>-L</code>) as well as parallelism (<code>-P</code>). If you’re not sure if it’ll do the right thing, use xargs echo first. Also, <code>-I&#123;&#125;</code> is handy. Examples:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -name \*.py | xargs grep some_function</span><br><span class="line">cat hosts | xargs -I&#123;&#125; ssh root@&#123;&#125; hostname</span><br></pre></td></tr></table></figure>
</li>
<li><p>Say you have a text file, like a web server log, and a certain value that appears on some lines, such as an <code>acct_id</code> parameter that is present in the URL. If you want a tally of how many requests for each <code>acct_id</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat access.log | egrep -o &#39;acct_id&#x3D;[0-9]+&#39; | cut -d&#x3D; -f2 | sort | uniq -c | sort -rn</span><br></pre></td></tr></table></figure>
</li>
<li><p>Run this function to get a random tip from this document (parses Markdown and extracts an item):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function taocl() &#123;</span><br><span class="line">  curl -s https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;jlevy&#x2F;the-art-of-command-line&#x2F;master&#x2F;README.md |</span><br><span class="line">    pandoc -f markdown -t html |</span><br><span class="line">    xmlstarlet fo --html --dropdtd |</span><br><span class="line">    xmlstarlet sel -t -v &quot;(html&#x2F;body&#x2F;ul&#x2F;li[count(p)&gt;0])[$RANDOM mod last()+1]&quot; |</span><br><span class="line">    xmlstarlet unesc | fmt 80</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h2 id="Obscure-but-useful"><a href="#Obscure-but-useful" class="headerlink" title="Obscure but useful"></a>Obscure but useful</h2><ul>
<li><p><code>expr</code>: perform arithmetic or boolean operations or evaluate regular expressions</p>
</li>
<li><p><code>m4</code>: simple macro processor</p>
</li>
<li><p><code>screen</code>: powerful terminal multiplexing and session persistence</p>
</li>
<li><p><code>yes</code>: print a string a lot</p>
</li>
<li><p><code>cal</code>: nice calendar</p>
</li>
<li><p><code>env</code>: run a command (useful in scripts)</p>
</li>
<li><p><code>look</code>: find English words (or lines in a file) beginning with a string</p>
</li>
<li><p><code>cut </code>and paste and join: data manipulation</p>
</li>
<li><p><code>fmt</code>: format text paragraphs</p>
</li>
<li><p><code>pr</code>: format text into pages/columns</p>
</li>
<li><p><code>fold</code>: wrap lines of text</p>
</li>
<li><p><code>column</code>: format text into columns or tables</p>
</li>
<li><p><code>expand </code>and unexpand: convert between tabs and spaces</p>
</li>
<li><p><code>nl</code>: add line numbers</p>
</li>
<li><p><code>seq</code>: print numbers</p>
</li>
<li><p><code>bc</code>: calculator</p>
</li>
<li><p><code>factor</code>: factor integers</p>
</li>
<li><p><code>nc</code>: network debugging and data transfer</p>
</li>
<li><p><code>dd</code>: moving data between files or devices</p>
</li>
<li><p><code>file</code>: identify type of a file</p>
</li>
<li><p><code>stat</code>: file info</p>
</li>
<li><p><code>tac</code>: print files in reverse</p>
</li>
<li><p><code>shuf</code>: random selection of lines from a file</p>
</li>
<li><p><code>comm</code>: compare sorted files line by line</p>
</li>
<li><p><code>hd</code> and <code>bvi</code>: dump or edit binary files</p>
</li>
<li><p><code>strings</code>: extract text from binary files</p>
</li>
<li><p><code>tr</code>: character translation or manipulation</p>
</li>
<li><p><code>iconv </code>or uconv: conversion for text encodings</p>
</li>
<li><p><code>split </code>and csplit: splitting files</p>
</li>
<li><p><code>7z</code>: high-ratio file compression</p>
</li>
<li><p><code>ldd</code>: dynamic library info</p>
</li>
<li><p><code>nm</code>: symbols from object files</p>
</li>
<li><p><code>ab</code>: benchmarking web servers</p>
</li>
<li><p><code>strace</code>: system call debugging</p>
</li>
<li><p><code>mtr</code>: better traceroute for network debugging</p>
</li>
<li><p><code>cssh</code>: visual concurrent shell</p>
</li>
<li><p><code>wireshark</code> and <code>tshark</code>: packet capture and network debugging</p>
</li>
<li><p><code>host</code> and <code>dig</code>: DNS lookups</p>
</li>
<li><p><code>lsof</code>: process file descriptor and socket info</p>
</li>
<li><p><code>dstat</code>: useful system stats</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/nicolargo/glances"><code>glances</code></a> : high level, multi-subsystem overview</p>
</li>
<li><p><code>iostat</code>: CPU and disk usage stats</p>
</li>
<li><p><code>htop</code>: improved version of top</p>
</li>
<li><p><code>last</code>: login history</p>
</li>
<li><p><code>w</code>: who’s logged on</p>
</li>
<li><p><code>id</code>: user/group identity info</p>
</li>
<li><p><code>sar</code>: historic system stats</p>
</li>
<li><p><code>iftop</code> or <code>nethogs</code>: network utilization by socket or process</p>
</li>
<li><p><code>ss</code>: socket statistics</p>
</li>
<li><p><code>dmesg</code>: boot and system error messages</p>
</li>
<li><p><code>hdparm</code>: SATA/ATA disk manipulation/performance</p>
</li>
<li><p><code>lsb_release</code>: Linux distribution info</p>
</li>
<li><p><code>lshw</code>: hardware information</p>
</li>
<li><p><code>gpg</code>: encrypt and sign files</p>
</li>
<li><p><code>fortune</code>, <code>ddate</code>, and <code>sl</code>: um, well, it depends on whether you consider steam locomotives and Zippy quotations “useful”</p>
</li>
</ul>
<h2 id="More-resources"><a href="#More-resources" class="headerlink" title="More resources"></a>More resources</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/alebcay/awesome-shell">awesome-shell</a>: A curated list of shell tools and resources.</li>
<li><a target="_blank" rel="noopener" href="http://redsymbol.net/articles/unofficial-bash-strict-mode/">Strict mode</a> for writing better shell scripts.</li>
</ul>
<h2 id="Disclaimer"><a href="#Disclaimer" class="headerlink" title="Disclaimer"></a>Disclaimer</h2><p>With the exception of very small tasks, code is written so others can read it. The fact you <em>can</em> do something in Bash doesn’t necessarily mean you should! ;)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://jiajie999.github.io/2015/03/19/2015-03-19-underscores-in-python/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jie.Jia">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="J's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/03/19/2015-03-19-underscores-in-python/" class="post-title-link" itemprop="url">underscores in python</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-03-19 22:06:53" itemprop="dateCreated datePublished" datetime="2015-03-19T22:06:53+08:00">2015-03-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-08-13 15:52:04" itemprop="dateModified" datetime="2020-08-13T15:52:04+08:00">2020-08-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>1 在解释器中用作显示上一条命令</p>
<p>2 在代码中用作一次性变量名</p>
<p>3 在I18N中用作标识需要国际化的字符串，django中<code>_()</code>是一个函数</p>
<pre><code>from django.utils.translation import ugettext as _
from django.http import HttpResponse

def my_view(request):
    output = _(&quot;Welcome to my site.&quot;)
    return HttpResponse(output)</code></pre>
<p>4 变量名前一个下划线用来标识私有变量，类内部使用</p>
<p>5 变量名前二个下划线用来处理继承中的变量名问题，python会自动给这类变量重命名</p>
<pre><code>&gt;&gt;&gt; class A(object):
...     def _internal_use(self):
...         pass
...     def __method_name(self):
...         pass
... 
&gt;&gt;&gt; dir(A())
[&#39;_A__method_name&#39;, ..., &#39;_internal_use&#39;]</code></pre>
<p>6 变量名前后都有下划线，python语言自用防止和用户定义变量名冲突。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://jiajie999.github.io/2015/02/07/2015-02-07-flask-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jie.Jia">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="J's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/02/07/2015-02-07-flask-notes/" class="post-title-link" itemprop="url">Flask notes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-02-07 20:02:21" itemprop="dateCreated datePublished" datetime="2015-02-07T20:02:21+08:00">2015-02-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-08-13 15:52:04" itemprop="dateModified" datetime="2020-08-13T15:52:04+08:00">2020-08-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Notes for <a target="_blank" rel="noopener" href="http://www.syncano.com/advanced-concepts-flask/">Advanced Concepts in Flask</a></p>
<p>There are two closely related notions when it comes to scaling – how the application is affected with an increase in users and how it is affected with an increase in programmers writing it.</p>
<p>The central questions: How do we work effectively in teams of 20 developers, 40 developers, or even thousands? And how do we handle maximum load on our system?</p>
<ol>
<li><p>几条原则，感觉不光适用于flask，写别的东西也一样，不过最后三条不容易做到啊</p>
<ul>
<li><p>Modularity of functionality</p>
</li>
<li><p>Loosely coupled code is better than tightly coupled (usually)</p>
</li>
<li><p>Comment often</p>
</li>
<li><p>Reuse code as often as possible</p>
</li>
<li><p>Write code that is as general as possible</p>
</li>
<li><p>Test as often as possible, both at the module level and the system level</p>
</li>
<li><p>Give yourself enough time to get things done and then stay within budget</p>
</li>
<li><p>Collaboration is extremely important – pair program and have solid metrics about your code</p>
</li>
</ul>
</li>
<li><p>Blue print来划分各个app，放便日后升级、改动、排错</p>
</li>
<li><p>Contexts的正确使用（没太看懂为啥重要，貌似框架本身已经把细节藏的很深了。。。有待进一步学习）</p>
<ul>
<li><p>理解flask里面的contexts以参考这篇<a target="_blank" rel="noopener" href="http://kronosapiens.github.io/blog/2014/08/14/understanding-contexts-in-flask/">文章</a></p>
<blockquote>
<p>“contexts are used to control the presence or absence of various global variables, so that you, the developer, can simply assume that the correct variables will be available when you need them. Given that an application can be running in multiple threads and serving multiple clients at once…”    </p>
</blockquote>
<blockquote>
<p>From Miguel Grinberg’s Flask Web Development (p12):</p>
</blockquote>
<blockquote>
<p>When Flask receives a request from a client, it needs to make a few objects available to the view functions that will handle it. A good example of this is the request object, which encapsulates the HTTP request sent by the client.</p>
</blockquote>
<blockquote>
<p>The obvious way in which Flask could give a view function access to the request object is by sending it as an argument, but that would require every single view function in the application to have an extra argument. …</p>
</blockquote>
<blockquote>
<p>To avoid cluttering view functions with lots of arguments that may or may not be neded, Flask uses contexts to temporarily make certain objects globally accessible.</p>
</blockquote>
</li>
</ul>
<p>粗浅的理解就是context用来管理flask中的全局变量，每个请求进来后可以访问这类变量中的资源，例如数据库链接，并且这种访问是线程安全的。</p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://jiajie999.github.io/2015/02/04/2015-02-04-a-question-about-people-who-using-python-in-zhihu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jie.Jia">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="J's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/02/04/2015-02-04-a-question-about-people-who-using-python-in-zhihu/" class="post-title-link" itemprop="url">A question about people who using python, from zhihu</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-02-04 20:13:34" itemprop="dateCreated datePublished" datetime="2015-02-04T20:13:34+08:00">2015-02-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-08-13 16:13:08" itemprop="dateModified" datetime="2020-08-13T16:13:08+08:00">2020-08-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>今天凑巧在zhihu上看到一个问题： <strong>使用 Python 会降低程序员的编程能力吗？</strong></p>
<p>用python也好久了，确实存在基本功下降的问题，非常赞同下面的答案。高中时我也是用pascal的<del>~</del></p>
<p>———————————–答案———————————–</p>
<p>十年前，Pascal。我会精确计算每个数组和变量使用的内存，熟练地用非递归方法改写程序，最短的时间内自己实现各种排序，多源最短路径，求凸包和相邻点，动态规划，二分图匹配和网络流算法等等等等，同时考虑算法的最坏复杂度和最高项前边的那个常数。现在，我一个都不记得了是的现在列举这些名词我就是在装逼。</p>
<p>五年前，C。我会自认为炫酷的使用函数指针，强制类型转换，goto语句，宏来实现各种技巧（他喵的全是Linux kernel害的）。我挣扎在多线程，多进程和各种锁。我试着照ICC出来的汇编改程序。但你让我不看书写个红黑树出来我是做不到了。现在，你突然让我写个C程序我得想一下语法。（所以这里我还是在装逼。）</p>
<p>现在，Python。写之前习惯性搜一下有没有现成的库。不会自己去实现图的数据结构了，因为有NetworkX。不会自己去处理网络通信了，用Redis搞个发布订阅机制或者干脆实现个ReST服务都没几行代码。多线程？Gevent搞异步多简单速度还比你快。</p>
<p>我变笨了。</p>
<p>但是。</p>
<p>十年前我只能刷刷USACO和浙大同济的Online Judge。AC是最高目标。<br>五年前我只能写写自己用的小软件系统驱动什么的，或者通宵写个大作业。<br>现在我在研究用Evolutionary Optimisation在云平台上调度Scientific Workflow。</p>
<p>会什么和干什么，你觉得哪个重要？</p>
<p>======</p>
<p>感谢 @徐酿泉的意见。</p>
<p>我的意思并不是说因为用这些语言所以在干这些事儿，而是确确实实感觉到这些年自己的编程能力（或者说基本功，因为毕竟很多高级的技巧我也会的越来越多）在下降，而且我认为这和我用的语言越来越高级是有一定关系的。当然语言和做的事之间完全没什么必然关系。但是以前的水平高又怎么样呢？做出来的不过是没有人关心的玩具罢了。即使能力值降低了，不过既然现在在做也可以做更有意义的事了，谁还关心跑分呢。</p>
<p>日，我发现语文能力也下降了。。。</p>
<p>======<br>呃。。我又改用Clojure了。。。</p>
<hr>
<p><a target="_blank" rel="noopener" href="http://www.zhihu.com/question/19900260">原问题在zhihu上的地址</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://jiajie999.github.io/2015/02/03/2015-02-03-getting-started-with-spark-in-python/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jie.Jia">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="J's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/02/03/2015-02-03-getting-started-with-spark-in-python/" class="post-title-link" itemprop="url">getting started with spark in python -- notes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-02-03 23:01:55" itemprop="dateCreated datePublished" datetime="2015-02-03T23:01:55+08:00">2015-02-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-08-13 16:44:07" itemprop="dateModified" datetime="2020-08-13T16:44:07+08:00">2020-08-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://districtdatalabs.silvrback.com/getting-started-with-spark-in-python">Src link</a></p>
<blockquote>
<p>Hadoop is the standard tool for distributed computing across really large data sets and is the reason why you see “Big Data” on advertisements as you walk through the airport. It has become an operating system for Big Data, providing a rich ecosystem of tools and techniques that allow you to use a large cluster of relatively cheap commodity hardware to do computing at supercomputer scale. Two ideas from Google in 2003 and 2004 made Hadoop possible: a framework for distributed storage (The Google File System), which is implemented as HDFS in Hadoop, and a framework for distributed computing (MapReduce).</p>
</blockquote>
<blockquote>
<p>These two ideas have been the prime drivers for the advent of scaling analytics, large scale machine learning, and other big data appliances for the last ten years! However, in technology terms, ten years is an incredibly long time, and there are some well-known limitations that exist, with MapReduce in particular. Notably, programming MapReduce is difficult. You have to chain Map and Reduce tasks together in multiple steps for most analytics. This has resulted in specialized systems for performing SQL-like computations or machine learning. Worse, MapReduce requires data to be serialized to disk between each step, which means that the I/O cost of a MapReduce job is high, making interactive analysis and iterative algorithms very expensive; and the thing is, almost all optimization and machine learning is iterative.</p>
</blockquote>
<p>值得注意的是做分析的时候需要手动分多步，把map和reduce任务串起来。本来mapreduce就是比较难的一个东西，再加上要用户自己组织任务这就更难了。所以hive，hbase之类sql式的产品应运而生。<br>Mapreduce任务需要在每次输入输出之间序列化数据到硬盘，如此导致大量I/O消耗。这就导致处理交互式分析和迭代类任务时整体性能开销变得很大。但是，几乎所有的机器学习算法和优化都是迭代的。。。</p>
<blockquote>
<p>To address these problems, Hadoop has been moving to a more general resource management framework for computation, YARN (Yet Another Resource Negotiator). YARN implements the next generation of MapReduce, but also allows applications to leverage distributed resources without having to compute with MapReduce. By generalizing the management of the cluster, research has moved toward generalizations of distributed computation, expanding the ideas first imagined in MapReduce.</p>
</blockquote>
<p>YARN改进了hadoop的资源管理和调度</p>
<blockquote>
<p>Spark is the first fast, general purpose distributed computing paradigm resulting from this shift and is gaining popularity rapidly. Spark extends the MapReduce model to support more types of computations using a functional programming paradigm, and it can cover a wide range of workflows that previously were implemented as specialized systems built on top of Hadoop. Spark uses in-memory caching to improve performance and, therefore, is fast enough to allow for interactive analysis (as though you were sitting on the Python interpreter, interacting with the cluster). Caching also improves the performance of iterative algorithms, which makes it great for data theoretic tasks, especially machine learning.</p>
</blockquote>
<p>Spark主要做了两个优化：</p>
<ul>
<li>使用函数式编程范式扩展mapreduce计算模型，并且兼容已有的工作流。</li>
<li>Spark使用in-memory caching来改善性能，Job中间输出和结果可以保存在内存中不用读写硬盘。进而有够快的速度来处理交互式的分析，这也同时提高了处理迭代算法的速度。</li>
</ul>
<p><strong>TODO</strong></p>
<p>配置单机spark环境</p>
<p>edx 有门课程，到时候边上边把文章的剩余部分翻译了</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://jiajie999.github.io/2015/01/30/2015-01-30-reverse-linked-list/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jie.Jia">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="J's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/01/30/2015-01-30-reverse-linked-list/" class="post-title-link" itemprop="url">reverse linked list</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-01-30 22:06:53" itemprop="dateCreated datePublished" datetime="2015-01-30T22:06:53+08:00">2015-01-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-08-13 16:25:27" itemprop="dateModified" datetime="2020-08-13T16:25:27+08:00">2020-08-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>问题： 反转单向链表</strong><br><strong>递归解法，注意消除环</strong></p>
<pre><code># -*- coding: utf-8 -*-


class Node():
    def __init__(self, value=None, next_node=None):
        self.value = value
        self.next = next_node

    def __str__(self):
        return str(self.value)


def output_list(node):
    while node:
        print node,
        node = node.next
    print


def init_input(n):
    head = Node(&#39;head&#39;)
    next_node = head

    for i in xrange(n):
        tmp = Node(i)
        next_node.next = tmp
        next_node = tmp
    return head


def recurse_reverse(node_head):
    if node_head is None:
        return
    if node_head.next is None:
        last_head = node_head
    else:
        last_head = recurse_reverse(node_head.next)
        node_head.next.next = node_head
        # 让新链表的后节点指向当前节点，否则值就变成空了
        node_head.next = None
        # 去掉环
    return last_head


if __name__ == &quot;__main__&quot;:
    head = init_input(100)
    print &quot;input: &quot;
    output_list(head)
    print
    p = recurse_reverse(head)
    print &quot;reversed:&quot;
    output_list(p)
    pass</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://jiajie999.github.io/2015/01/25/2015-01-25-python-interview-problem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jie.Jia">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="J's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/01/25/2015-01-25-python-interview-problem/" class="post-title-link" itemprop="url">python interview problem</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-01-25 23:01:55" itemprop="dateCreated datePublished" datetime="2015-01-25T23:01:55+08:00">2015-01-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-08-13 16:43:50" itemprop="dateModified" datetime="2020-08-13T16:43:50+08:00">2020-08-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一些关于python语言的题目，留档。<a target="_blank" rel="noopener" href="http://blog.csdn.net/caroline_wendy/article/details/25230835">源地址</a></p>
<ol>
<li>在python中, list, tuple, dict, set有什么区别, 主要应用在什么样的场景?</li>
</ol>
<p>list: 链表, 有序的项目, 通过索引进行查找, 使用方括号”[]”;<br>tuple: 元组, 元组将多样的对象集合到一起, 不能修改, 通过索引进行查找, 使用括号”()”;<br>dict: 字典, 字典是一组键(key)和值(value)的组合, 通过键(key)进行查找, 没有顺序, 使用大括号”{}”;<br>set: 集合,无序, 元素只出现一次, 自动去重, 使用”set([])”;</p>
<p>应用场景:<br>list, 简单的数据集合, 可以使用索引;<br>tuple, 把一些数据当做一个整体去使用, 不能修改;<br>dict, 使用键值和值进行关联的数据;<br>set, 数据只出现一次, 只关心数据是否出现, 不关心其位置;</p>
<ol start="2">
<li>静态函数, 类函数, 成员函数的区别?</li>
</ol>
<p>静态函数(@staticmethod): 即静态方法,主要处理与这个类的逻辑关联;<br>类函数(@classmethod): 即类方法, 更关注于从类中调用方法, 而不是在实例中调用方法, 可以用作方法重载, 传入参数cls;<br>成员函数: 实例的方法, 只能通过实例进行调用;</p>
<p>具体应用:<br>日期的方法, 可以通过实例化(<strong>init</strong>)进行数据输出, 传入参数self;<br>可以通过类的方法(@classmethod)进行数据转换, 传入参数cls;<br>可以通过静态方法(@staticmethod)进行数据验证;</p>
<ol start="4">
<li>写一个函数, 输入一个字符串, 返回倒序排列的结果: 如: string_reverse(‘abcdef’), 返回: ‘fedcba’<br>(请采用多种方法实现, 并对实现方法进行比较)<br>解答:<br> 5种方法的比较:<ol>
<li>简单的步长为-1, 即字符串的翻转;</li>
<li>交换前后字母的位置;</li>
<li>递归的方式, 每次输出一个字符;</li>
<li>双端队列, 使用extendleft()函数;</li>
<li>使用for循环, 从左至右输出;</li>
</ol>
</li>
</ol>
<pre><code>string = &#39;abcdef&#39;

def string_reverse1(string):
    return string[::-1]


def string_reverse2(string):
    t = list(string)
    l = len(t)
    for i,j in zip(range(l-1, 0, -1), range(l//2)):
        t[i], t[j] = t[j], t[i]
    return &quot;&quot;.join(t)


def string_reverse3(string):
    if len(string) &lt;= 1:
        return string
    return string_reverse3(string[1:]) + string[0]


from collections import deque
def string_reverse4(string):
    d = deque()
    d.extendleft(string)
    return &#39;&#39;.join(d)


def string_reverse5(string):
    #return &#39;&#39;.join(string[len(string) - i] for i in range(1, len(string)+1))
    return &#39;&#39;.join(string[i] for i in range(len(string)-1, -1, -1))


print(string_reverse1(string))
print(string_reverse2(string))
print(string_reverse3(string))
print(string_reverse4(string))
print(string_reverse5(string))</code></pre>
<ol start="5">
<li>请用自己的算法, 按升序合并如下两个list, 并去除重复的元素:</li>
</ol>
<pre><code>list1 = [2, 3, 8, 4, 9, 5, 6]
list2 = [5, 6, 10, 17, 11, 2]
import random
list1 = [2, 3, 8, 4, 9, 5, 6]  
list2 = [5, 6, 10, 17, 11, 2]  


def qsort(L):  
   if len(L)&lt;2: return L  
   pivot_element = random.choice(L)  
   small = [i for i in L if i&lt; pivot_element]  
   large = [i for i in L if i&gt; pivot_element]  
   return qsort(small) + [pivot_element] + qsort(large)  


def merge(list1, list2):  
    return qsort(list1 + list2)  


print(merge(list1, list2))  </code></pre>
<ol start="6">
<li>请写出打印结果</li>
</ol>
<pre><code>x = [0, 1]
i = 0
i, x[i] = 1, 2
print(x)</code></pre>
<p>打印结果: [0, 2], python可以使用连续赋值, 从左至右.</p>
<pre><code>g = lambda x, y=2, z : x + y**z
g(1, z=10) = ?</code></pre>
<p>打印结果: 异常, 形参表末尾才可以有默认参数, z需要提供默认参数.</p>
<ol start="7">
<li>说一下以下代码片段存在的问题</li>
</ol>
<pre><code>from amodule import * # amodule is an exist module  

class dummyclass(object):  
    def __init__(self):  
        self.is_d = True  
        pass  

class childdummyclass(dummyclass):  
    def __init__(self, isman):  
        self.isman = isman  

    @classmethod  
    def can_speak(self): return True  

    @property  
    def man(self): return self.isman  

if __name__ == &quot;__main__&quot;:  
    object = new childdummyclass(True)  
    print object.can_speak()  
    print object.man()  
    print object.is_d  </code></pre>
<p>解答: </p>
<ol>
<li><p>警告: object是python新形式(new style)的一个基础类, 不应该被重新定义;</p>
</li>
<li><p>警告: 类方法(classmethod)是类所拥有的方法, 传入的参数应该是cls, 而不是self;</p>
</li>
<li><p>错误: Python没有new关键字, 如需修改new, 如单例模式, 可以重写(override)<strong>new</strong>;</p>
</li>
<li><p>错误: @property, 表示属性, 不是方法, 则不需要加括号”()”, 直接调用object.man, 即可;</p>
</li>
<li><p>错误: 如果想使用基类的成员, 则需要初始化基类, 如dummyclass.<strong>init</strong>(self), 即可;</p>
</li>
<li><p>额外: 类名尽量使用大写.</p>
</li>
<li><p>介绍一下python的异常处理机制和自己开发过程中的体会</p>
</li>
</ol>
<p>解答:<br>Python的异常处理机制:<br>try: 尝试抛出异常;<br>raise: 引发异常;<br>except: 处理异常;<br>finally: 是否发生异常都需要做的事情;</p>
<p>创建新的异常类型, 需要继承Exception类, 可以定义类的属性, 便于处理异常;</p>
<p>开发体会:<br>异常主要处理读取文件, 也可以使用with的方法读取文件; 还可以用于网络连接, 异常可以包含大量的错误信息, 进行错误处理.</p>
<p>问题一：以下的代码的输出将是什么? 说出你的答案并解释。</p>
<p>class Parent(object):<br>    x = 1</p>
<p>class Child1(Parent):<br>    pass</p>
<p>class Child2(Parent):<br>    pass</p>
<p>print Parent.x, Child1.x, Child2.x<br>Child1.x = 2<br>print Parent.x, Child1.x, Child2.x<br>Parent.x = 3<br>print Parent.x, Child1.x, Child2.x<br>答案</p>
<p>以上代码的输出是：</p>
<p>1 1 1<br>1 2 1<br>3 2 3<br>使你困惑或是惊奇的是关于最后一行的输出是 3 2 3 而不是 3 2 1。为什么改变了 Parent.x 的值还会改变 Child2.x 的值，但是同时 Child1.x 值却没有改变？</p>
<p>这个答案的关键是，在 Python 中，类变量在内部是作为字典处理的。如果一个变量的名字没有在当前类的字典中发现，将搜索祖先类（比如父类）直到被引用的变量名被找到（如果这个被引用的变量名既没有在自己所在的类又没有在祖先类中找到，会引发一个 AttributeError 异常 ）。</p>
<p>因此，在父类中设置 x = 1 会使得类变量 X 在引用该类和其任何子类中的值为 1。这就是因为第一个 print 语句的输出是 1 1 1。</p>
<p>随后，如果任何它的子类重写了该值（例如，我们执行语句 Child1.x = 2），然后，该值仅仅在子类中被改变。这就是为什么第二个 print 语句的输出是 1 2 1。</p>
<p>最后，如果该值在父类中被改变（例如，我们执行语句 Parent.x = 3），这个改变会影响到任何未重写该值的子类当中的值（在这个示例中被影响的子类是 Child2）。这就是为什么第三个 print 输出是 3 2 3。</p>
<p>问题三：以下代码将输出什么?</p>
<p>list = [‘a’, ‘b’, ‘c’, ‘d’, ‘e’]<br>print list[10:]</p>
<p>答案</p>
<p>以上代码将输出 []，并且不会导致一个 IndexError。</p>
<p>正如人们所期望的，试图访问一个超过列表索引值的成员将导致 IndexError（比如访问以上列表的 list[10]）。尽管如此，试图访问一个列表的以超出列表成员数作为开始索引的切片将不会导致 IndexError，并且将仅仅返回一个空列表。</p>
<p>一个讨厌的小问题是它会导致出现 bug ，并且这个问题是难以追踪的，因为它在运行时不会引发错误。</p>
<p>问题四：以下的代码的输出将是什么? 说出你的答案并解释？</p>
<p>def multipliers():<br>    return [lambda x : i * x for i in range(4)]</p>
<p>print [m(2) for m in multipliers()]</p>
<p>你将如何修改 multipliers 的定义来产生期望的结果</p>
<p>答案</p>
<p>以上代码的输出是 [6, 6, 6, 6] （而不是 [0, 2, 4, 6]）。</p>
<p>这个的原因是 Python 的闭包的后期绑定导致的 late binding，这意味着在闭包中的变量是在内部函数被调用的时候被查找。所以结果是，当任何 multipliers() 返回的函数被调用，在那时，i 的值是在它被调用时的周围作用域中查找，到那时，无论哪个返回的函数被调用，for 循环都已经完成了，i 最后的值是 3，因此，每个返回的函数 multiplies 的值都是 3。因此一个等于 2 的值被传递进以上代码，它们将返回一个值 6 （比如： 3 x 2）。</p>
<p>（顺便说下，正如在 The Hitchhiker’s Guide to Python 中指出的，这里有一点普遍的误解，是关于 lambda 表达式的一些东西。一个 lambda 表达式创建的函数不是特殊的，和使用一个普通的 def 创建的函数展示的表现是一样的。）</p>
<p>这里有两种方法解决这个问题。</p>
<p>最普遍的解决方案是创建一个闭包，通过使用默认参数立即绑定它的参数。例如：</p>
<p>def multipliers():<br>    return [lambda x, i=i : i * x for i in range(4)]</p>
<p>另外一个选择是，你可以使用 functools.partial 函数：</p>
<p>from functools import partial<br>from operator import mul</p>
<p>def multipliers():<br>    return [partial(mul, i) for i in range(4)]</p>
<p>问题五：以下的代码的输出将是什么? 说出你的答案并解释？</p>
<p>def extendList(val, list=[]):<br>    list.append(val)<br>    return list</p>
<p>list1 = extendList(10)<br>list2 = extendList(123,[])<br>list3 = extendList(‘a’)</p>
<p>print “list1 = %s” % list1<br>print “list2 = %s” % list2<br>print “list3 = %s” % list3</p>
<p>你将如何修改 extendList 的定义来产生期望的结果</p>
<p>以上代码的输出为：</p>
<p>list1 = [10, ‘a’]<br>list2 = [123]<br>list3 = [10, ‘a’]</p>
<p>许多人会错误的认为 list1 应该等于 [10] 以及 list3 应该等于 [‘a’]。认为 list 的参数会在 extendList 每次被调用的时候会被设置成它的默认值 []。</p>
<p>尽管如此，实际发生的事情是，新的默认列表仅仅只在函数被定义时创建一次。随后当 extendList 没有被指定的列表参数调用的时候，其使用的是同一个列表。这就是为什么当函数被定义的时候，表达式是用默认参数被计算，而不是它被调用的时候。</p>
<p>因此，list1 和 list3 是操作的相同的列表。而 ````list2是操作的它创建的独立的列表（通过传递它自己的空列表作为list``` 参数的值）。</p>
<p>extendList 函数的定义可以做如下修改，但，当没有新的 list 参数被指定的时候，会总是开始一个新列表，这更加可能是一直期望的行为。</p>
<p>def extendList(val, list=None):<br>    if list is None:<br>        list = []<br>    list.append(val)<br>    return list</p>
<p>使用这个改进的实现，输出将是：</p>
<p>list1 = [10]<br>list2 = [123]<br>list3 = [‘a’]</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Jie.Jia</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">24</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jie.Jia</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
